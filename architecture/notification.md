# 通知機能

このシステムは、ユーザーに対して様々な方法で通知を送信する機能を提供します。

## 通知の種類

以下の3種類の通知方法をサポートしています。

*   **メール通知**: ユーザーの登録メールアドレスに通知を送信します。
*   **プッシュ通知**: ユーザーが許可した場合、デバイスにプッシュ通知を送信します。
*   **アプリ内通知**: アプリケーション内で通知を表示します。

## 主な機能

*   **ユーザーごとの通知設定**:
    *   通知の種類ごと（メール、プッシュ、アプリ内）に通知の有効/無効を設定できます。
    *   通知を受け取らない時間帯（Quiet Hours）を設定できます。
*   **通知の送信**:
    *   指定したユーザーIDに対して、タイトル、メッセージ、および追加のメタデータを含む通知を送信できます。
    *   `NotificationType` によって通知の種類を区別します。
*   **一括通知**:
    *   複数のユーザーIDに対して、同じ内容の通知を一括で送信できます。

## 技術的な詳細

*   通知処理の主要なロジックは `backend/app/services/notification_service.py` に実装されています。
*   通知送信のAPIエンドポイントは `backend/app/api/v1/endpoints/notifications.py` で定義されています。
    *   `/send`: 単一ユーザーへの通知送信
    *   `/send/bulk`: 複数ユーザーへの一括通知送信
*   ユーザーの通知設定は `NotificationSetting` モデルで管理されます。
*   送信されたアプリ内通知は `InAppNotification` モデルでデータベースに保存されます。

## 今後の検討事項

（必要に応じて追記）
